{% extends "BpaulinUpfitBundle:Crud:show.html.twig" %}
{% import "BpaulinUpfitBundle::macro.html.twig" as macros %}

{% if is_granted('ROLE_ADMIN') %}
    {%
        set breadcrumbs = {
            'Admin' : {
                'route': path('upfit_admin'),
                'icon': 'briefcase',
            },
            'Programs' : {
                'route': path('admin_program'),
                'icon': 'list',
            },
            (entity.name) : {
                'route': path('admin_program_show', { 'id': entity.id }),
            },
        }
    %}
    {%
        set actions = {
            'Edit' : {
                'route': path('admin_program_edit', { 'id': entity.id }),
                'icon': 'edit',
                'class': 'primary'
            },
            'Follow' : {
                'route': path('member_session_new', { 'follow': 'program', 'id': entity.id }),
                'icon': 'play',
            },
            'Delete' : {
                'route': path('admin_program_delete', { 'id': entity.id }),
                'icon': 'minus',
                'class': 'danger'
            },
        }
    %}
{% else %}
    {%
        set breadcrumbs = {
            'Member' : {
                'route': path('upfit_member'),
                'icon': 'gamepad',
            },
            'Programs' : {
                'route': path('member_program'),
                'icon': 'list',
            },
            (entity.name) : {
                'route': path('member_program_show', { 'id': entity.id }),
            },
        }
    %}
    {%
        set actions = {
            'Follow' : {
                'route': path('member_session_new', { 'follow': 'program', 'id': entity.id }),
                'icon': 'play',
                'class': 'primary'
            },
        }
    %}
{% endif %}

{%
    set fields = {
        'name' : entity.name,
        'stages' : macros.stagesList(entity),
    }
%}

{% block h1 %}Program <small>{{ entity.name }}</small>{% endblock %}
